'STATE IDENTIFIERS
STATE_TITLE="TITLE"
STATE_FIGHT="FIGHT"
STATE_IN_PLAY="INPLAY"
'STATE HANDLERS
IMPORT "TITLE.BAS"
IMPORT "FIGHT.BAS"
IMPORT "INPLAY.BAS"

CURRENT_STATE=STATE_TITLE
DEF STATE_MACHINE_UPDATE(DELTA)
    IF CURRENT_STATE=STATE_IN_PLAY THEN
        CURRENT_STATE=IN_PLAY_UPDATE(DELTA)
    ELSEIF CURRENT_STATE=STATE_TITLE THEN
        CURRENT_STATE=TITLE_UPDATE(DELTA)
    ELSEIF CURRENT_STATE=STATE_FIGHT THEN
        CURRENT_STATE=FIGHT_UPDATE(DELTA)
    ELSE
        RAISE("INVALID STATE: "+CURRENT_STATE+"!")
    ENDIF
ENDDEF
